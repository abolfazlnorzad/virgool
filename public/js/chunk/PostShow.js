(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"+7PI":function(t,e,s){"use strict";s("63WZ")},"63WZ":function(t,e,s){var o=s("cw9t");"string"==typeof o&&(o=[[t.i,o,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(o,n);o.locals&&(t.exports=o.locals)},"KHd+":function(t,e,s){"use strict";function o(t,e,s,o,n,a,r,i){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=s,c._compiled=!0),o&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=l):n&&(l=i?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(c.functional){c._injectStyles=l;var v=c.render;c.render=function(t,e){return l.call(e),v(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}s.d(e,"a",(function(){return o}))},XiHh:function(t,e,s){"use strict";s.r(e);var o=s("pvRw"),n=s("pnuC"),a=s.n(n),r=s("XuX8"),i=new(s.n(r).a),l={name:"PostComments",props:["data"],setup:function(t,e){var s=e.root,n=Object(o.d)(!1),r=Object(o.d)(!1),l=Object(o.d)({content:null,comment_id:t.data.id}),c=Object(o.d)(t.data),v=function(){axios.post("/api/replies/".concat(s.$route.params.slug),l.value).then((function(){n.value=!1,l.value.content=null})).catch((function(t){u.value.show=!0,u.value.msg=t.response.data.errors.content[0]}))},u=Object(o.d)({show:!1,msg:""}),m=Object(o.a)((function(){return s.$store.state.user.isLoggedIn&&s.$store.state.user.user.id==c.value.user_id}));return Echo.channel("virgool_reply_".concat(c.value.id)).listen(".reply.created",(function(t){var e=t.reply;c.value.replies.push(e),i.$emit("comment_created")})),Echo.channel("virgool_reply_".concat(t.data.id)).listen("CommentDeletedEvent",(function(t){var e=t.comment;c.value.replies=c.value.replies.filter((function(t){return t.id!==e.id})),i.$emit("comment_deleted")})),{deleteComment:function(){axios.delete("/api/comments/".concat(c.value.id))},showReply:n,moment:a.a,saveReply:v,reply:l,cancelReply:function(){n.value=!1,l.value.content=null,r.value=!1},errors:u,showDeleteIconOrUpdate:m,showUpdate:r,select:function(){return r.value?void axios.patch("/api/comments/".concat(c.value.id),l.value).then((function(t){var e=t.data;r.value=!1,l.value.content=null,c.value.content=e.data.content})).catch((function(){u.value.show=!0,u.value.msg=error.response.data.errors.content[0]})):v()},cm:c,opentTextareaForUpdate:function(){l.value.content=c.value.content,r.value=!0}}}},c=s("KHd+"),v=Object(c.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mt-12"},[s("v-card",{staticClass:"mx-auto"},[s("div",{staticClass:"d-flex flex-row"},[s("v-list-item",[s("v-list-item-avatar",[s("v-img",{attrs:{src:t.cm.user.profile_src}})],1),t._v(" "),s("v-list-item-content",[s("v-list-item-title",[t._v(t._s(t.cm.user.name))]),t._v(" "),s("v-list-item-subtitle",[t._v(t._s(t.moment(t.cm.created_at).fromNow()))])],1)],1),t._v(" "),s("v-spacer"),t._v(" "),t.$store.state.user.isLoggedIn?s("v-icon",{staticClass:"mx-5",on:{click:function(e){t.showReply=!0}}},[t._v("mdi-undo\n            ")]):t._e(),t._v(" "),t.showDeleteIconOrUpdate?s("v-icon",{staticClass:"ml-7",on:{click:t.deleteComment}},[t._v("mdi-delete\n            ")]):t._e(),t._v(" "),t.showDeleteIconOrUpdate?s("v-icon",{staticClass:"ml-7",on:{click:t.opentTextareaForUpdate}},[t._v("\n\n                mdi-file-document-edit\n            ")]):t._e()],1),t._v(" "),s("v-card-text",[t._v("\n            "+t._s(t.cm.content)+"\n        ")])],1),t._v(" "),t.showReply||t.showUpdate?s("div",[s("p",[t._v("دیدگاه ها")]),t._v(" "),[s("v-textarea",{attrs:{outlined:"",filled:"",label:"نظر خود را بنویسید"},model:{value:t.reply.content,callback:function(e){t.$set(t.reply,"content",e)},expression:"reply.content"}}),t._v(" "),s("div",{staticClass:"d-flex flex-row"},[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{color:"info",large:"",rounded:""},on:{click:t.cancelReply}},[t._v("لغو\n                ")]),t._v(" "),s("v-btn",{attrs:{color:"success",large:"",rounded:""},on:{click:t.select}},[t._v("ارسال دیدگاه\n                ")])],1)]],2):t._e(),t._v(" "),t._l(t.data.replies,(function(t){return s("post-comments",{key:t.id,staticClass:"mr-4",attrs:{data:t}})})),t._v(" "),s("v-snackbar",{attrs:{color:"error"},model:{value:t.errors.show,callback:function(e){t.$set(t.errors,"show",e)},expression:"errors.show"}},[t._v("\n        "+t._s(t.errors.msg)+"\n    ")])],2)}),[],!1,null,"25fe200c",null).exports;moment.loadPersian({usePersianDigits:!0});var u={name:"PostShow",components:{PostComments:v},metaInfo:function(){return{title:this.post.title,meta:[{name:"description",content:this.post.description}]}},setup:function(t,e){var s=e.root,n=Object(o.d)({}),a=Object(o.d)({}),r=Object(o.d)(null),l=Object(o.d)({content:"",post_id:null}),c=Object(o.d)({show:!1,msg:""});axios.get("/api/posts/".concat(s.$route.params.slug)).then((function(t){var e=t.data;n.value=e.post,a.value=e.related_post,r.value="blog.test/link/".concat(e.post.short_link),l.value.post_id=e.post.id,Echo.channel("virgool_comment_".concat(n.value.id)).listen(".comment.created",(function(t){var e=t.comment;n.value.parent_comments.push(e),i.$emit("comment_created")})),Echo.channel("virgool_comment_".concat(n.value.id)).listen("CommentDeletedEvent",(function(t){var e=t.comment;n.value.parent_comments=n.value.parent_comments.filter((function(t){return t.id!==e.id})),i.$emit("comment_deleted")}))})),i.$on("comment_created",(function(){n.value.comments_count++})),i.$on("comment_deleted",(function(){n.value.comments_count--}));return{follow:function(){axios.post("/api/follows/".concat(n.value.user.username)).then((function(){n.value.user.is_follows=!n.value.user.is_follows}))},like:function(){n.value.is_liked=!n.value.is_liked;var t=n.value.is_liked?"post":"delete";axios[t]("/api/likes/".concat(n.value.slug)).then((function(){n.value.is_liked?n.value.likes_count++:n.value.likes_count--}))},bookmark:function(t){t.is_bookmarked=!t.is_bookmarked;var e=t.is_bookmarked?"post":"delete";axios[e]("/api/bookmarks/".concat(t.slug))},post:n,related_post:a,moment:moment,short_link:r,onCopy:function(){var t=r.value;r.value="کپی شد !",setTimeout((function(){r.value=t}),1500)},comment:l,sendComment:function(){axios.post("/api/comments/".concat(n.value.slug),l.value).then((function(t){t.data;l.value.content=null})).catch((function(t){c.value.show=!0,c.value.msg=t.response.data.errors.content[0]}))},errors:c}}},m=(s("+7PI"),Object(c.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.post.user?s("v-content",[s("v-container",[s("v-row",{staticClass:"d-flex justify-center"},[s("v-col",{attrs:{cols:"12",md:"8"}},[s("v-list-item",[s("v-list-item-avatar",{attrs:{size:"80"}},[s("v-avatar",{attrs:{size:"80"}},[s("v-img",{attrs:{src:t.post.user.profile_src}})],1)],1),t._v(" "),s("v-list-item-content",[s("v-list-item-title",{staticClass:"font-weight-bold"},[t._v("\n                               "+t._s(t.post.user.name)+"\n                               "),t.$store.state.user.isLoggedIn&&t.post.user.id!==t.$store.state.user.user.id?s("v-btn",{staticClass:"darken-2 px-5 mr-3 mb-3",attrs:{color:t.post.user.is_follows?"info":"grey",rounded:"",dark:"",small:""},on:{click:t.follow}},[t._v("\n                                   "+t._s(t.post.user.is_follows?"دنبال میکنید":"دنبال کنید")+"                                ")]):t._e()],1),t._v(" "),s("v-list-item-subtitle",{staticClass:"body-2 grey--text"},[t._v("\n                               "+t._s(t.post.user.bio)+"\n                           ")]),t._v(" "),s("v-list-item-subtitle",{staticClass:"caption grey--text"},[t._v("\n                               "+t._s(t.moment(t.post.created_at).fromNow())+" / خواندن "+t._s(t.post.min_read)+" دقیقه\n                           ")])],1)],1),t._v(" "),s("div",{staticClass:"my-10"},[s("h1",{staticClass:"title"},[t._v(t._s(t.post.title)+" ")])]),t._v(" "),s("div",[s("v-img",{attrs:{src:t.post.image}})],1),t._v(" "),s("div",{staticClass:"mt-12",domProps:{innerHTML:t._s(t.post.content)}}),t._v(" "),s("div",{staticClass:"my-10"},t._l(t.post.categories,(function(e){return s("v-btn",{key:e.slug,staticClass:"mr-5 ",attrs:{depressed:""}},[s("router-link",{attrs:{to:{name:"post-category",params:{slug:e.slug}}}},[t._v("\n                              "+t._s(e.title)+"\n                          ")])],1)})),1),t._v(" "),s("div",{staticClass:"d-flex flex-row mb-5"},[t.$store.state.user.isLoggedIn?s("span",{staticClass:"ml-5",on:{click:function(e){return t.bookmark(t.post)}}},[s("v-icon",[t._v("\n                               "+t._s(t.post.is_bookmarked?"mdi-bookmark":" mdi-bookmark-outline")+"\n                           ")])],1):t._e(),t._v(" "),t.$store.state.user.isLoggedIn?s("span",{staticClass:"ml-5",on:{click:t.like}},[s("v-icon",{class:{"red--text":t.post.is_liked}},[t._v("\n                               "+t._s(t.post.is_liked?"mdi-heart":"mdi-heart-outline")+"\n\n                           ")]),t._v("\n"+t._s(t.post.likes_count)+"\n                       ")],1):t._e(),t._v(" "),s("span",{staticClass:"ml-5"},[s("v-icon",[t._v("mdi-comment-outline")]),t._v("\n                          "+t._s(t.post.comments_count)+"\n                       ")],1),t._v(" "),s("v-spacer"),t._v(" "),s("v-icon",[t._v("mdi-telegram")]),t._v(" "),s("v-btn",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.short_link,expression:"short_link",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticClass:"mr-3",attrs:{outlined:"",rounded:"",disabled:"کپی شد !"==t.short_link}},[t._v("\n                           "+t._s(t.short_link)+"\n\n                       ")])],1),t._v(" "),s("v-divider"),t._v(" "),s("div",{staticClass:"mt-12"},[s("p",{staticClass:"body-2 font-weight-bold"},[t._v("شاید از این نوشته‌ها هم خوشتان بیاید")]),t._v(" "),s("v-container",{attrs:{fluid:""}},[s("v-row",t._l(t.related_post,(function(e){return s("v-col",{key:e.slug,attrs:{cols:"12",md:"4"}},[s("v-card",[s("router-link",{attrs:{to:{name:"post-show",params:{slug:e.slug}}}},[s("v-img",{attrs:{src:e.image}})],1),t._v(" "),s("v-card-title",[s("router-link",{attrs:{to:{name:"post-show",params:{slug:e.slug}}}},[t._v("\n                                               "+t._s(e.title)+"\n                                           ")])],1),t._v(" "),s("v-card-actions",[s("v-list-item",[s("v-list-item-avatar",[s("v-avatar",[s("router-link",{attrs:{to:{name:"user-posts",params:{username:e.user.username}}}},[s("v-img",{attrs:{src:e.user.profile_src}})],1)],1)],1),t._v(" "),s("v-list-item-content",[s("v-list-item-title",{staticClass:"body-2 font-weight-bold"},[s("router-link",{attrs:{to:{name:"user-posts",params:{username:e.user.username}}}},[t._v("\n                                                           "+t._s(e.user.name)+"\n                                                       ")])],1),t._v(" "),s("v-list-item-subtitle",{staticClass:"caption grey--text"},[t._v("\n                                                       "+t._s(e.min_read)+"\n                                                   ")])],1)],1),t._v(" "),s("v-spacer"),t._v(" "),t.$store.state.user.isLoggedIn?s("span",{staticClass:"ml-5",on:{click:function(s){return t.bookmark(e)}}},[s("v-icon",[t._v("\n                               "+t._s(e.is_bookmarked?"mdi-bookmark":" mdi-bookmark-outline")+"\n                           ")])],1):t._e()],1)],1)],1)})),1)],1)],1),t._v(" "),s("div",{staticClass:"mt-12"},[s("p",[t._v("دیدگاه ها")]),t._v(" "),t.$store.state.user.isLoggedIn?[s("v-textarea",{attrs:{outlined:"",filled:"",label:"نظر خود را بنویسید"},model:{value:t.comment.content,callback:function(e){t.$set(t.comment,"content",e)},expression:"comment.content"}}),t._v(" "),s("div",{staticClass:"d-flex flex-row"},[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{color:"success",large:"",rounded:""},on:{click:t.sendComment}},[t._v("ارسال دیدگاه\n                               ")])],1)]:[s("span",[t._v("برای ارسال دیدگاه باید وارد حساب کاربری تان شوید")])]],2),t._v(" "),t._l(t.post.parent_comments,(function(t){return s("post-comments",{key:t.id,attrs:{data:t}})}))],2)],1)],1),t._v(" "),s("v-snackbar",{attrs:{color:"error"},model:{value:t.errors.show,callback:function(e){t.$set(t.errors,"show",e)},expression:"errors.show"}},[t._v("\n           "+t._s(t.errors.msg)+"\n       ")])],1):t._e()}),[],!1,null,"d5a0b5f8",null));e.default=m.exports},cw9t:function(t,e,s){(t.exports=s("I1BE")(!1)).push([t.i,".body-text[data-v-d5a0b5f8]{text-align:justify;line-height:2.3rem}",""])}}]);