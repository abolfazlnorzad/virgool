(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"+kH3":function(e,t,s){"use strict";var i=s("LvDl"),a={name:"BaseDataTable",props:{fetchUrl:{type:String,required:!0},deleteUrl:{type:String,required:!1},routeName:{type:String,required:!0},titleText:{type:String,required:!0},itemKey:{type:String,default:"id"},createItemRoute:{type:String,required:!1},editRoute:{type:String,required:!1},showRoute:{type:String,required:!1}},data:function(){var e,t;return{moment:moment,search:this.$route.query.search,singleSelect:!1,selected:[],headers:[],items:[],total:null,loading:!1,footerProps:{"items-per-page-options":[5,10,25,50],"items-per-page-text":"تعداد رکورد در هر صفحه:","page-text":""},options:{page:null!==(e=this.$route.query.page)&&void 0!==e?e:1,itemsPerPage:null!==(t=this.$route.query.per_page)&&void 0!==t?t:10,sortBy:this.$route.query.sort_by?[this.$route.query.sort_by]:["id"],sortDesc:"desc"===this.$route.query.sort_type?[!0]:[!1],groupBy:[],groupDesc:[],multiSort:!1,mustSort:!1}}},computed:{selectedIds:function(){return this.selected.map((function(e){return e.id}))}},created:function(){this.fetchItems()},methods:{deleteItems:function(){var e=this;axios.post(this.deleteUrl,{items:this.selectedIds}).then((function(){e.items.data=e.items.data.filter((function(t){return!e.selected.includes(t)}))})).finally((function(){return e.selected=[]}))},updateOptions:function(e){var t=this.createQuery(e);this.$router.push({name:this.routeName,query:t},(function(){}))},fetchItems:function(){var e=this,t=this.createQuery(this.options);this.loading=!0,axios.get(this.fetchUrl,{params:t}).then((function(t){var s=t.data;e.headers=s.headers,e.items=s.items,e.total=s.items.total,e.options.page=s.items.current_page,e.options.itemsPerPage=Number(s.items.per_page),e.footerProps["page-text"]="".concat(e.items.from,"-").concat(e.items.to," از ").concat(e.items.total)})).finally((function(){return e.loading=!1}))},searchItems:Object(i.debounce)((function(){this.options.page=1,this.updateOptions(this.options)}),500),createQuery:function(e){return{page:e.page,per_page:e.itemsPerPage,sort_by:e.sortBy[0],sort_type:!0===e.sortDesc[0]?"desc":"asc",search:this.search}}}},r=s("KHd+"),o=Object(r.a)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items.data,"server-items-length":e.total,loading:e.loading,"loading-text":"دریافت اطلاعات...","footer-props":e.footerProps,options:e.options,"single-select":e.singleSelect,"no-data-text":"هیچ رکوردی یافت نشد!!!","item-key":e.itemKey,"show-select":""},on:{"update:options":[e.updateOptions,function(t){e.options=t}]},scopedSlots:e._u([{key:"top",fn:function(){return[s("div",{staticClass:"d-flex flex-row pt-5 px-5"},[s("p",{staticClass:"headline font-weight-bold"},[e._v(e._s(e.titleText))]),e._v(" "),s("v-spacer"),e._v(" "),s("v-text-field",{staticClass:"ml-3",attrs:{label:"جستجو"},on:{keyup:e.searchItems},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),e.createItemRoute?s("v-btn",{staticClass:"ml-3",attrs:{color:"info",to:{name:e.createItemRoute}}},[s("v-icon",[e._v("mdi-plus")])],1):e._e(),e._v(" "),e.deleteUrl?s("v-btn",{attrs:{disabled:!e.selected.length},on:{click:e.deleteItems}},[s("v-icon",{staticClass:"red--text"},[e._v("mdi-delete")])],1):e._e()],1)]},proxy:!0},{key:"item.created_at",fn:function(t){var s=t.item;return[e._v("\n        "+e._s(e.moment(s.created_at).format("jYY-jM-jD"))+"\n    ")]}},{key:"item.image",fn:function(e){var t=e.item;return[s("v-img",{staticClass:"my-3",attrs:{src:t.image,"max-width":"100px","max-height":"100px"}})]}},{key:"item.actions",fn:function(t){var i=t.item;return[e.editRoute?s("v-btn",{attrs:{color:"info",to:{name:e.editRoute,params:{id:i.id}}}},[s("v-icon",[e._v("mdi-pencil")])],1):e._e()]}},{key:"item.link",fn:function(t){var i,a=t.item;return[e.showRoute?s("v-btn",{attrs:{to:{name:e.showRoute,params:(i={},i[e.itemKey]=a[e.itemKey],i)}}},[s("v-icon",[e._v("mdi-eye")])],1):e._e()]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})}),[],!1,null,"055fe12c",null);t.a=o.exports},"6loX":function(e,t,s){"use strict";s.r(t);var i={name:"PostIndex",components:{BaseDataTable:s("+kH3").a},metaInfo:{title:"مدیریت پست ها"},data:function(){return{breadcrumbs:[{text:"داشبورد",disabled:!1,to:{name:"admin-dashboard"},exact:!0},{text:"مدیریت پست ها",disabled:!0,exact:!0}]}}},a=s("KHd+"),r=Object(a.a)(i,(function(){var e=this.$createElement,t=this._self._c||e;return t("v-content",[t("v-container",[t("v-row",[t("v-col",{staticClass:"mt-10",attrs:{cols:"12"}},[t("v-breadcrumbs",{attrs:{items:this.breadcrumbs}}),this._v(" "),t("BaseDataTable",{attrs:{"fetch-url":"/api/admin/posts","delete-url":"/api/admin/posts/destroy","show-route":"post-show","title-text":"مدیریت پست ها","route-name":"admin-post-index","item-key":"slug"}})],1)],1)],1)],1)}),[],!1,null,"025754bc",null);t.default=r.exports}}]);