(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"6soD":function(e,t,a){"use strict";a.r(t);var s=a("tGF5"),r=a("pvRw"),n=a("9c6I"),l=a("g6NE");function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var o={name:"Profile",metaInfo:{title:"پروفایل من"},setup:function(){return c(c({},(e=Object(r.d)(null),t=Object(r.d)(null),a=Object(r.d)({username:!1,email:!1}),i=Object(r.d)({username:null,email:null}),u=Object(r.d)({username:null,email:null}),o=Object(r.a)((function(){return"blog.test/"})),v=Object(r.a)((function(){return o.value+e.value.username})),(d=function(){axios.get("/api/me").then((function(t){var a=t.data;e.value=a,i.value.email=a.email,i.value.username=a.username}))})(),{user:e,old:i,editStatus:a,changeEdit:function(t){a.value[t]=!a.value[t],i.value[t]=e.value[t]},cancel:function(t){a.value[t]=!1,e.value[t]=i.value[t]},uploadProfile:function(t){e.value.profile_name=t.target.files[0].name,e.value.profile_src=e.value.profile=Object(n.a)(t)},url:o,fullusername:v,getUser:d,form:t,update:function(){t.value.validate()&&axios.patch("/api/profile",e.value).then((function(e){var t=e.data;l.a.dispatch("user/changeName",t.name),u.value={email:null,username:null},a.value={email:!1,username:!1}})).catch((function(e){var t=e.response;for(var s in t.data.errors)console.log(s),u.value[s]=t.data.errors[s][0],a.value[s]=!0}))},errors:u})),{},{required:s.c,verifyEmail:s.d,moreThan:s.b,verifyUsername:s.e});var e,t,a,i,u,o,v,d}},v=a("KHd+"),d=Object(v.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.user?a("v-container",[a("v-row",{staticClass:"d-flex flex-column",attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{col:"12",md:"8"}},[a("v-form",{ref:"form"},[a("div",{staticClass:"d-flex flex-row"},[a("v-avatar",{attrs:{size:"75px"}},[a("v-img",{attrs:{src:e.user.profile_src||"/images/avatar.png"},on:{click:function(t){return e.$refs.profile.click()}}})],1),e._v(" "),a("input",{ref:"profile",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.uploadProfile}}),e._v(" "),a("div",{staticClass:"w-100 mx-7"},[a("v-text-field",{attrs:{rules:[e.required("نام الزامی است")],placeholder:"نام و نام خانوادگی"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),e._v(" "),a("v-textarea",{attrs:{placeholder:"درباره من"},model:{value:e.user.bio,callback:function(t){e.$set(e.user,"bio",t)},expression:"user.bio"}})],1)],1),e._v(" "),a("v-divider",{staticClass:"my-15"}),e._v(" "),a("div",[a("h2",[e._v(" تظیمات حساب کاربری ")]),e._v(" "),a("div",{staticClass:"my-7 d-flex flex-row"},[a("div",{staticClass:"d-flex flex-column"},[a("span",{staticClass:"title"},[e._v(" نام کاربری ")]),e._v(" "),a("div",{staticClass:"d-flex flex-row"},[a("v-btn",{staticClass:"my-3 mx-3",class:{success:e.editStatus.username},attrs:{small:""},on:{click:function(t){return e.changeEdit("username")}}},[e._v("\n                                        "+e._s(e.editStatus.username?"ثبت":"ویرایش")+"\n                                    ")]),e._v(" "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.editStatus.username,expression:"editStatus.username"}],staticClass:"my-3",attrs:{small:""},on:{click:function(t){return e.cancel("username")}}},[e._v("\n                                        انصراف\n                                    ")])],1)]),e._v(" "),a("v-spacer"),e._v(" "),e.editStatus.username?[a("v-text-field",{staticStyle:{direction:"ltr"},attrs:{"error-messages":e.errors.username,rules:[e.required("نام کاربری الزامی است"),e.verifyUsername()],prefix:e.url},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})]:[a("span",[e._v(" "+e._s(e.fullusername)+" ")])]],2),e._v(" "),a("v-divider",{staticClass:"my-10"}),e._v(" "),a("div",{staticClass:"my-7 d-flex flex-row"},[a("div",{staticClass:"d-flex flex-column"},[a("span",{staticClass:"title"},[e._v(" ایمیل ")]),e._v(" "),a("div",{staticClass:"d-flex flex-row"},[a("v-btn",{staticClass:"my-3 mx-3",class:{success:e.editStatus.email},attrs:{small:""},on:{click:function(t){return e.changeEdit("email")}}},[e._v("\n                                        "+e._s(e.editStatus.email?"ثبت":"ویرایش")+"\n                                    ")]),e._v(" "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.editStatus.email,expression:"editStatus.email"}],staticClass:"my-3",attrs:{small:""},on:{click:function(t){return e.cancel("email")}}},[e._v("\n                                        انصراف\n                                    ")])],1)]),e._v(" "),a("v-spacer"),e._v(" "),e.editStatus.email?[a("v-text-field",{staticStyle:{direction:"ltr"},attrs:{"error-messages":e.errors.email,rules:[e.required("ایمیل الزامی است"),e.verifyEmail()]},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})]:[a("span",[e._v(" "+e._s(e.user.email)+" ")])]],2),e._v(" "),a("v-divider",{staticClass:"mt-10"}),e._v(" "),a("div",{staticClass:"mt-5 d-flex flex-row"},[a("div",{staticClass:"d-flex flex-column"},[a("span",{staticClass:"title"},[e._v("تغییر رمز عبور")])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-text-field",{staticClass:"ltr",attrs:{placeholder:"رمز عبور",outlined:"",rules:[e.moreThan(8,"رمز عبور",!0)]},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),e._v(" "),a("v-divider",{staticClass:"my-10"}),e._v(" "),a("div",{staticClass:"my-7 d-flex flex-row"},[a("div",{staticClass:"d-flex flex-column"},[a("span",{staticClass:"title"},[e._v(" دریافت ایمیل هنگام لایک کردن ")])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-switch",{attrs:{inset:""},model:{value:e.user.email_on_like,callback:function(t){e.$set(e.user,"email_on_like",t)},expression:"user.email_on_like"}})],1),e._v(" "),a("v-divider",{staticClass:"my-10"}),e._v(" "),a("div",{staticClass:"my-7 d-flex flex-row"},[a("div",{staticClass:"d-flex flex-column"},[a("span",{staticClass:"title"},[e._v(" دریافت ایمیل هنگام پاسخ  ")])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-switch",{attrs:{inset:""},model:{value:e.user.email_on_reply,callback:function(t){e.$set(e.user,"email_on_reply",t)},expression:"user.email_on_reply"}})],1),e._v(" "),a("v-divider",{staticClass:"my-10"}),e._v(" "),a("div",{staticClass:"my-7 d-flex flex-row"},[a("div",{staticClass:"d-flex flex-column"},[a("span",{staticClass:"title"},[e._v(" دریافت ایمیل هنگام دنبال کردن ")])]),e._v(" "),a("v-spacer"),e._v(" "),a("v-switch",{attrs:{inset:""},model:{value:e.user.email_on_follow,callback:function(t){e.$set(e.user,"email_on_follow",t)},expression:"user.email_on_follow"}})],1),e._v(" "),a("div",{staticClass:"d-flex flex-row"},[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{rounded:"",color:"success"},on:{click:e.update}},[e._v("\n                                دخیره تغییرات\n                            ")])],1)],1)],1)],1)],1)],1):e._e()}),[],!1,null,"5ea02c81",null);t.default=d.exports},"9c6I":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a("pvRw");function r(e){var t=e.target.files[0],a=new FileReader,r=Object(s.d)(null);return a.onload=function(e){r.value=e.target.result},a.readAsDataURL(t),r}},"KHd+":function(e,t,a){"use strict";function s(e,t,a,s,r,n,l,i){var c,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=a,u._compiled=!0),s&&(u.functional=!0),n&&(u._scopeId="data-v-"+n),l?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},u._ssrRegister=c):r&&(c=i?function(){r.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:r),c)if(u.functional){u._injectStyles=c;var o=u.render;u.render=function(e,t){return c.call(t),o(e,t)}}else{var v=u.beforeCreate;u.beforeCreate=v?[].concat(v,c):[c]}return{exports:e,options:u}}a.d(t,"a",(function(){return s}))},tGF5:function(e,t,a){"use strict";function s(e){return function(t){return!!t||e}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"یک ایمیل درست را وارد کنید";return function(t){return/^([a-zA-Z0-9]([\.\w]*)@([\w]{2,9}[\.])[a-zA-Z]{2,4})$/.test(t)||e}}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"یک نام کاربری معتبر وارد کنید";return function(t){return/^[a-z0-9_-]{3,15}$/.test(t)||e}}function l(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(s){return s?!!s&&s.length<=e||"طول ".concat(t," نباید بیشتر از ").concat(e," کاراکتر باشد"):!!a||t+" الزامیست "}}function i(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(s){return s?!!s&&s.length>=e||"طول ".concat(t," باید بیشتر از ").concat(e," کاراکتر باشد"):!!a||t+" الزامیست "}}a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return r})),a.d(t,"e",(function(){return n})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return i}))}}]);